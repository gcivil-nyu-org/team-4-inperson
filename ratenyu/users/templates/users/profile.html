{% extends 'base.html' %}

{% block content %}
{% load static %}

<div class = "user-panel">
    <h1 class = "user-details">Hello <br><br> {{user_details.user}}!</h1>
    <div class="user-form">
        <h4 class = 'user-form'> Name </h4>
        <p id='user_name' contenteditable="false"> {{user_details.name}} </p>
        <h4 class = 'user-form'> Username </h4>
        <p id="user_username" contenteditable="false"> {{user_details.user}} </p>
        <h4 class = 'user-form'> Major </h4>
        <p id="user_major" contenteditable="false"> {{user_details.major}} </p>
        <h4 class = 'user-form'> Student Status </h4>
        <p id="user_status" contenteditable="false"> {{user_details.student_status}} </p>
        <button type="submit" class="user-form" onclick="setP()" id="edit_profile">Edit Profile</button>
    </div>
</div>

<div class="user-reviews">
    <h1>My Reviews</h1>
    <div class="nyu-logo-light">
    </div>
    {% for review in reviews %}
    <div class="user-review">
        <p>{{ review.pub_date.month }}/{{ review.pub_date.day }}/{{ review.pub_date.year }} <br>
            {{ review.rating }}.0/5.0 </p>
        <p><span class="user-title"> Course: <a href="{% url 'courses:course_detail' course_id=review.class_id.course.course_id %}">{{ review.class_id.course.course_title }}</a>
        | Professor : <a href="{% url 'professors:professor_detail' professor_id=review.class_id.professor.professor_id %}">{{ review.class_id.professor.name }}</a></span><br>
        {{ review.review_text }}</p>
    </div>
    {% endfor %}
</div>

<script>
	let setP = () => {
        let userName = document.getElementById('user_name');
        let userUserName = document.getElementById('user_username');
        let userMajor = document.getElementById('user_major');
        let userStatus = document.getElementById('user_status');
        let editProfileButton = document.getElementById('edit_profile');

        if (editProfileButton.innerHTML === 'Save') {
            userName.contentEditable = 'false';
            userName.innerHTML =
            userUserName.contentEditable = 'false';
            userMajor.contentEditable = 'false';
            userStatus.contentEditable ='false';
            editProfileButton.innerHTML = 'Edit Profile';
        }
        else {
            userName.contentEditable = 'true';
            userUserName.contentEditable = 'true';
            userMajor.contentEditable = 'true';
            userStatus.contentEditable ='true';
            editProfileButton.innerHTML = 'Save';
        }
    }
</script>

{% endblock %}
